{% extends 'base.html' %}

{% block title %}Shopping Cart{% endblock %}

{% block content %}
<h2>Shopping Cart</h2> <!-- Title of page --> 

{% if not cart %} <!-- If cart is empty -->
    <p>Your cart is empty.</p>
{% endif %}
<!-- If cart is not empty -->
<table>
    <tr>
        <th>Product</th>
        <th>Price</th>
        <th>Quantity</th>
        <th>Total</th>
        <th>Actions</th>
    </tr>

    {%for item in cart%}
    <tr>
        <td>{{item.name}}</td>
        <td>{{item.price}}</td>
        <td>

            <form action="{{url_for('cart.update_quantity',item_id=item.id )}}" method="POST"> <!-- This calls url /cart/update_quantity/10 if say the quantity was 10 -->
                <input type="number" name="quantity" value="{{item.quantity}}" min="1">
                <button type="submit">Update</button>
            </form>
        </td>
        <td>${{ item.price * item.quantity}}</td> <!--Total price of item-->
        <td>
            <a href="{{url_for('cart.remove', item_id=item.id) }}">Remove</a> <!-- Deletes item from cart -->
        </td>
    </tr>
    {% endfor %} 

    <tr>
        <td colspan="3">Total</td>
        <td>${{total}}</td> <!-- Total price of all items in cart -->
        <td>
            <form action="{{url_for('cart.clean')}}" method="POST"> <!-- This calls url /cart/clean -->
                <button type="submit">Clear Cart</button>
            </form>
        </td>
    </tr>
    <tr>
        <td colspan="3"></td>
        <td>
            <form action="{{url_for('cart.checkout')}}" method="POST"> <!-- This calls url /cart/checkout -->
                <button type="submit">Checkout</button>
            </form>
        </td>
    </tr>
</table>
{% endblock %}